<%page expression_filter="h"/>
<%!
  import json
  from django.utils.translation import ugettext as _
  from openedx.core.djangolib.js_utils import js_escaped_string, dump_js_escaped_json
%>
<%inherit file="../main.html" />
<%
  course_discovery_enabled = settings.FEATURES.get('ENABLE_COURSE_DISCOVERY')
%>

<%namespace name='static' file='../static_content.html'/>

% if course_discovery_enabled:
<%block name="header_extras">
  % for template_name in ["course_card", "filter_bar", "filter", "facet", "facet_option"]:
  <script type="text/template" id="${template_name}-tpl">
      <%static:include path="discovery/${template_name}.underscore" />
  </script>
  % endfor
  <%static:require_module module_name="js/discovery/discovery_factory" class_name="DiscoveryFactory">
    DiscoveryFactory(
      ${course_discovery_meanings | n, dump_js_escaped_json},
      getParameterByName('search_query'),
      "${user_language | n, js_escaped_string}",
      "${user_timezone | n, js_escaped_string}"
    );
  </%static:require_module>
</%block>
% endif

<%block name="pagetitle">${_("Courses")}</%block>

<main id="main" aria-label="Content" tabindex="-1">
    <section class="find-courses">
      <section class="courses-container">
        % if course_discovery_enabled:
        

          <div id="discovery-form" role="search" aria-label="course" class="wrapper-search-context">
            <div class="clear-search hidden">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M7.82505 13.0008L12.725 17.9008C12.925 18.1008 13.0209 18.3341 13.0125 18.6008C13.0042 18.8674 12.9 19.1008 12.7 19.3008C12.5 19.4841 12.2667 19.5799 12 19.5883C11.7334 19.5966 11.5 19.5008 11.3 19.3008L4.70005 12.7008C4.60005 12.6008 4.52922 12.4924 4.48755 12.3758C4.44588 12.2591 4.42505 12.1341 4.42505 12.0008C4.42505 11.8674 4.44588 11.7424 4.48755 11.6258C4.52922 11.5091 4.60005 11.4008 4.70005 11.3008L11.3 4.70078C11.4834 4.51745 11.7125 4.42578 11.9875 4.42578C12.2625 4.42578 12.5 4.51745 12.7 4.70078C12.9 4.90078 13 5.13828 13 5.41328C13 5.68828 12.9 5.92578 12.7 6.12578L7.82505 11.0008H19C19.2834 11.0008 19.5209 11.0966 19.7125 11.2883C19.9042 11.4799 20 11.7174 20 12.0008C20 12.2841 19.9042 12.5216 19.7125 12.7133C19.5209 12.9049 19.2834 13.0008 19 13.0008H7.82505Z" fill="#007AE6"/>
              </svg>
              <span>Khám phá khóa học</span>
            </div>
            <div class="search-container">

              <div id="discovery-message" class="search-status-label hidden"></div>

            
            <form class="wrapper-search-input">
              <button type="submit" class="button postfix discovery-submit" title="${_('Search')}">
                <span class="search-icon" aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
  <path d="M12.6667 21.3333C10.2444 21.3333 8.19444 20.4944 6.51667 18.8167C4.83889 17.1389 4 15.0889 4 12.6667C4 10.2444 4.83889 8.19444 6.51667 6.51667C8.19444 4.83889 10.2444 4 12.6667 4C15.0889 4 17.1389 4.83889 18.8167 6.51667C20.4944 8.19444 21.3333 10.2444 21.3333 12.6667C21.3333 13.6444 21.1778 14.5667 20.8667 15.4333C20.5556 16.3 20.1333 17.0667 19.6 17.7333L27.0667 25.2C27.3111 25.4444 27.4333 25.7556 27.4333 26.1333C27.4333 26.5111 27.3111 26.8222 27.0667 27.0667C26.8222 27.3111 26.5111 27.4333 26.1333 27.4333C25.7556 27.4333 25.4444 27.3111 25.2 27.0667L17.7333 19.6C17.0667 20.1333 16.3 20.5556 15.4333 20.8667C14.5667 21.1778 13.6444 21.3333 12.6667 21.3333ZM12.6667 18.6667C14.3333 18.6667 15.75 18.0833 16.9167 16.9167C18.0833 15.75 18.6667 14.3333 18.6667 12.6667C18.6667 11 18.0833 9.58333 16.9167 8.41667C15.75 7.25 14.3333 6.66667 12.6667 6.66667C11 6.66667 9.58333 7.25 8.41667 8.41667C7.25 9.58333 6.66667 11 6.66667 12.6667C6.66667 14.3333 7.25 15.75 8.41667 16.9167C9.58333 18.0833 11 18.6667 12.6667 18.6667Z" fill="#576F8A"/>
</svg>

</span>
                <div aria-live="polite" aria-relevant="all">
    <div id="loading-indicator" class="loading-spinner hidden" style="width: 34px; height: 34px;">
      <span class="icon fa fa-spinner fa-spin" aria-hidden="true"></span>
      <span class="sr">${_('Loading')}</span>
    </div>
              </button>
              <label for="discovery-input" class="sr">${_('Search for a course')}</label>
              <input id="discovery-input" class="discovery-input" placeholder="${_('Search for a course')}" type="text"/>

            </form>
            </div>
          </div>
          
          <!--

            <div id="filter-bar" class="filters hide-phone is-collapsed">
            </div> 
          -->
        
        % endif

        <div class="courses${'' if course_discovery_enabled else ' no-course-discovery'}" role="region" aria-label="${_('List of Courses')}">
          <ul class="courses-listing courses-list">
            %for course in courses:
            <li class="courses-listing-item">
              <%include file="../course.html" args="course=course" />
            </li>
            %endfor
          </ul>
        </div>


        % if course_discovery_enabled:
        <!--

          <aside aria-label="${_('Refine Your Search')}" class="search-facets phone-menu">
            <h2 class="header-search-facets">${_('Refine Your Search')}</h2>
            <section class="search-facets-lists">
            </section>
          </aside>
        -->
        % endif

      </section>
    </section>
</main>
